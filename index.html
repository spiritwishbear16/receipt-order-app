<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>收據匯出範例</title>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  .receipt {
    width: 300px;
    border: 1px solid #ccc;
    padding: 15px;
    background-color: #fff;
    margin-bottom: 10px;
  }
  .item {
    margin-bottom: 10px;
  }
  .item-name {
    font-weight: bold;
  }
  .item-detail {
    font-size: 12px;
    color: #555;
  }
  button {
    padding: 8px 15px;
    font-size: 14px;
  }
</style>
</head>
<body>

<div class="receipt" id="receipt">
  <h3>收據</h3>
  <div class="item">
    <div class="item-name">撞色磨毛高腰內搭褲</div>
    <div class="item-detail">尺寸: M | 顏色: 黑色 | 數量: 2 | 小計: $500</div>
  </div>
  <div class="item">
    <div class="item-name">長袖上衣</div>
    <div class="item-detail">尺寸: L | 顏色: 灰色 | 數量: 1 | 小計: $290</div>
  </div>
  <hr>
  <div>總計: $790</div>
</div>

<button id="downloadBtn">⬇️ 匯出 PNG</button>

<script>
document.getElementById("downloadBtn").addEventListener("click", function() {
  const receipt = document.getElementById("receipt");
  
  html2canvas(receipt, {
    scale: 2,           // 提高清晰度
    useCORS: true       // 跨域圖片支援
  }).then(canvas => {
    // 生成 PNG
    const link = document.createElement("a");
    link.download = "receipt.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
  }).catch(err => {
    console.error("匯出 PNG 失敗：", err);
    alert("匯出 PNG 失敗，請查看控制台");
  });
});
</script>

</body>
</html>
